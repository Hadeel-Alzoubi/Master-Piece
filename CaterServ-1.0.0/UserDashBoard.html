<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard</title>
  
        <!-- Google Web Fonts -->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&family=Playball&display=swap" rel="stylesheet">

        <!-- Icon Font Stylesheet -->
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css"/>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">

        <!-- Libraries Stylesheet -->
        <link href="lib/animate/animate.min.css" rel="stylesheet">
        <link href="lib/lightbox/css/lightbox.min.css" rel="stylesheet">
        <link href="lib/owlcarousel/owl.carousel.min.css" rel="stylesheet">

        <!-- Customized Bootstrap Stylesheet -->
        <link href="css/bootstrap.min.css" rel="stylesheet">

        <!-- Template Stylesheet -->
        <link href="css/style.css" rel="stylesheet">
</head>
<body>
    <div id="spinner" class="spinner"></div>
    <div class="dashboard">
        <div class="sidebar">
            <h2>اسم الزبون يجب ان يظهر هنا </h2>
            <br>
            <br>
            <ul>
                <li><a href="#" data-target="crud-products">المفضلة</a></li>
                <li><a href="#" data-target="payment-method">السلة</a></li>
                <li><a href="#" data-target="order-products">طلبات خاصة</a></li>
                <li><a href="#" data-target="update-profile">تعديل المعلومات الشخصية</a></li>
                
            </ul>
        </div>
        <div class="main-content">
            <section id="crud-products" class="section">
                <h2>المفضلة</h2>
                <!-- <button class="btn btn-primary" onclick="Go()">اضافة منتج</button> -->
                <br>
                <br>
                <table id="product-Wishlist">
                    <thead>
                        <tr>
                            <th>اسم المنتج</th>
                            <th>صورة المنتج</th>
                            <th>السعر</th>
                            <th>كمية</th>
                         
                            <th>حذف من المفضلة</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Product rows will be inserted here -->
                    </tbody>
                </table>
            </section>
            <section id="order-products" class="section" style="display: none;">
                <h2>طلبات الزبائن لقطع خاصة </h2>
                 <!-- <button class="btn btn-success">قبول</button>
                <button class="btn btn-danger">رفض</button>
               <button class="btn btn-primary" onclick="Go()">اضافة منتج</button> -->
                <br>
                <br>
               <p>Coming soon </p>
               <!-- <img src="" alt="صورة للمنتج اذا احب الزبون وضع صورة تقريبية للمنتج"></img> -->
            </section>
            <section id="update-profile" class="section" style="display: none;">
                <h2 style="text-align: center;">تعديل المعلومات الشخصية</h2>
                <form id="formUser">
                    <label for="username">الاسم</label>
                    <input type="text" id="username" name="username" />
                    <label for="email" >البريد الالكتروني</label>
                    <input type="email" id="email" name="email" />
                    <label for="number" >رقم الهاتف</label>
                    <input type="number" id="number" name="number" />

                    <label for="password" >كلمة السر القديمة</label>
                    <input type="password" id="OldPassword" name="password" />
                    <label for="password" >كلمة السر الجديدة</label>
                    <input type="password" id="NewPassword" name="password" />
                    <label for="password" >تأكيد كلمة السر</label>
                    <input type="password" id="ConfirmPassword" name="password" />
                    
                    <label for="address" >الموقع</label>
                    <input type="text" id="address" name="address" />
                    <button type="submit" class="btn btn-primary" onclick="UpdateProfile()">حفظ التعديلات</button>
                </form>
            </section>
            <section id="payment-method" class="section" style="display: none;">
                <h2>السلة</h2>
                <form id="cart-form">
                    <table class="table table-bordered" id="table">
                        <thead class="table-light">
                            <tr>
                                <th scope="col">اسم المنتج</th>
                                <th scope="col">السعر</th>
                                <th scope="col">الكمية</th>
            
                            </tr>
                        </thead>
                       
                    </table>
                    <div class="d-flex justify-content-between mt-4">
                        <!-- <button type="button" class="btn btn-outline-danger" onclick="clearCart()">Clear Cart</button> -->
                        <button type="submit" class="btn btn-primary">Checkout</button>
                    </div>
                </form>
            </section>
            
        </div>
    </div>

    <script>
        document.querySelectorAll('.sidebar a').forEach(link => {
            link.addEventListener('click', function(event) {
                event.preventDefault();
                const targetId = this.getAttribute('data-target');
                document.querySelectorAll('.main-content .section').forEach(section => {
                    section.style.display = section.id === targetId ? 'block' : 'none';
                });
            });
        });
        
      async function deleteProduct(id) {
        debugger;
            event.preventDefault();
            const urlDelete = `https://localhost:44397/api/Cart/DeleteItem/${id}`;
          await fetch(urlDelete, {
                    method: "DELETE",
                    
                });

                window.location.reload();
                window.alert("هل تريد حذف المنتج");
        }
        function addProduct() {
    document.getElementById('crud-products').style.display = 'none';
    document.getElementById('add-product').style.display = 'block';
}

        // getProducts();


        async function ShowCart() {
            const url = 'https://localhost:44397/api/Cart/GetToCartItem'
            var data = await fetch(url);
            var response = await data.json();

            var table =  document.getElementById("table");

            response.forEach(element => {
                table.innerHTML += `
                <tbody>
                    <tr >
                       <td >${element.product.productName}</td>
                       <td>${element.product.price}</td>
                    
                       <td><input id="quantity" type="number" value="${element.quantity}" class="form-input" style="width:100px"></td>
                       <td><button type="button" class="btn btn-outline-danger" onclick="clearCart(${element.cartItemId})" >حذف المنج</button></td>
                       
                    </tr>
                    </tbody>
                `
            });
        }
        ShowCart();

        async function ShowFavorite() {
            const url = 'https://localhost:44397/api/Favorite/GetToFavoritetItem'
            var data = await fetch(url);
            var response = await data.json();

            var table =  document.getElementById("product-Wishlist");

            response.forEach(element => {
                table.innerHTML += `
                <tbody>
                    <tr >
                       <td >${element.product.productName}</td>
                       <td><img src="${element.product.imageUrl}"/></td>
                       <td>${element.product.price}</td>
                      
                       <td><input id="quantity" type="number" value="${element.quantity}" class="form-input" style="width:100px"></td>
                       <td><button type="button" class="btn btn-outline-danger" onclick="clearCart(${element.cartItemId})" >حذف المنج</button></td>
                       
                    </tr>
                    </tbody>
                `
            });
        }
        ShowFavorite();
    </script>
    <script src="js/register.js"></script>
    <script src="js/AddProduct.js"></script>
</body>
</html>
